---
interface Props {
  title: string;
  excerpt: string;
  category: string;
  date: string;
  readTime: string;
  image: string;
  author: {
    name: string;
    avatar: string;
  };
  slug: string;
}

const { title, excerpt, category, date, readTime, image, author, slug } = Astro.props;

// Category color mapping
const categoryColors: Record<string, string> = {
  'DevOps': 'bg-orange-500/90',
  'Front-end': 'bg-blue-500/90', 
  'Mobile': 'bg-green-500/90',
  'Back-end': 'bg-purple-500/90',
  'QA': 'bg-red-500/90',
  'Design': 'bg-pink-500/90'
};

const categoryColor = categoryColors[category] || 'bg-primary/90';
---

<article class="group flex flex-col bg-white dark:bg-surface-dark border border-gray-200 dark:border-border-dark rounded-xl overflow-hidden hover:shadow-xl hover:border-primary/30 dark:hover:border-primary/30 transition-all duration-300 h-full shadow-sm">
  <!-- Image -->
  <div class="relative h-48 overflow-hidden bg-gray-100 dark:bg-gray-800">
    <div class="absolute top-3 left-3 z-10">
      <span class={`${categoryColor} backdrop-blur-sm text-white text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide shadow-sm`}>
        {category}
      </span>
    </div>
    <img 
      alt={title}
      class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" 
      src={image}
      loading="lazy"
    />
  </div>

  <!-- Content -->
  <div class="p-5 flex flex-col flex-1">
    <!-- Meta -->
    <div class="flex items-center gap-2 text-xs text-gray-500 dark:text-text-secondary-dark mb-3 font-medium">
      <span class="flex items-center gap-1">
        <span class="material-symbols-outlined text-[16px]">calendar_today</span> 
        {date}
      </span>
      <span>â€¢</span>
      <span class="flex items-center gap-1">
        <span class="material-symbols-outlined text-[16px]">schedule</span> 
        {readTime}
      </span>
    </div>

    <!-- Title -->
    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-2 leading-tight group-hover:text-primary transition-colors">
      <a href={`/blog/${slug}`} class="hover:underline">
        {title}
      </a>
    </h3>

    <!-- Excerpt -->
    <p class="text-gray-600 dark:text-text-secondary-dark text-sm line-clamp-3 mb-4 flex-1">
      {excerpt}
    </p>

    <!-- Author -->
    <div class="flex items-center gap-3 pt-4 border-t border-gray-100 dark:border-border-dark mt-auto">
      <div class="size-8 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden ring-2 ring-white dark:ring-gray-800">
        <img 
          alt={author.name}
          class="w-full h-full object-cover" 
          src={author.avatar}
          loading="lazy"
        />
      </div>
      <span class="text-sm font-semibold text-gray-900 dark:text-white">{author.name}</span>
    </div>
  </div>
</article>